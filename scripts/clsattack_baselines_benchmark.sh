
# Run binary attack / cls collision in a variety of settings:
# 1) random batches
# python classattack_breaches.py name=clsattack_b01_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b32_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b64_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=64 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b64_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=64 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b128_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=128 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b256_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=256 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b500_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=500 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100
#
# # 2) batches with a single class (the worst case for the binary attack)
# python classattack_breaches.py name=clsattack_b1_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b4_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b8_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b16_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b32_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100
# python classattack_breaches.py name=clsattack_b50_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=clsattack case.server.name=class_malicious_parameters case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100

# Compare to honest methods:
# IG
python benchmark_breaches.py name=igattack_b1_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b4_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b8_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b16_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b32_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=invertinggradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b50_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=invertinggradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True

python benchmark_breaches.py name=igattack_b1_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b4_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b8_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b16_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=invertinggradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b32_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=invertinggradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igattack_b50_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=invertinggradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
# Yin
python benchmark_breaches.py name=yinattack_b1_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b4_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b8_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b16_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b32_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=seethroughgradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b50_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=seethroughgradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True

python benchmark_breaches.py name=yinattack_b1_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=igsattack_b4_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b8_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b16_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=seethroughgradients case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b32_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=seethroughgradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=yinattack_b50_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=seethroughgradients  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 attack.regularization.deep_inversion.scale=1e-4 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True

# modern
python benchmark_breaches.py name=modernattack_b1_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b4_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b8_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b16_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b32_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=modern  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b50_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=modern  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True

python benchmark_breaches.py name=modernattack_b1_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b4_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b8_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b16_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=modern case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b32_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=modern  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernattack_b50_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=modern  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True

# clsattack hyperparams
python benchmark_breaches.py name=clsparamsattack_b1_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b4_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b8_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b16_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b32_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=clsattack  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b50_rand_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=clsattack  case/data=ImageNet case.user.provide_labels=True case.data.partition=random case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True

python benchmark_breaches.py name=clsparamsattack_b1_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=1 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=modernsattack_b4_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=4 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b8_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=8 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b16_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=16 attack=clsattack case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b32_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=32 attack=clsattack  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
python benchmark_breaches.py name=clsparamsattack_b50_unique_fullImageNet case.user.user_idx=0 case.user.num_data_points=50 attack=clsattack  case/data=ImageNet case.user.provide_labels=True case.data.partition=unique-class case.data.default_clients=100 base_dir=/cmlscratch/jonas0/breaching/outputs save_reconstruction=True
